# 10-27

> å‚è€ƒï¼š
>
> - [ç°ä»£ JavaScript æ•™ç¨‹](https://zh.javascript.info/)

> è¿›åº¦ï¼šğŸ…*3
>
> - [Objectï¼ˆå¯¹è±¡ï¼‰ï¼šåŸºç¡€çŸ¥è¯†](https://zh.javascript.info/object-basics)

## åŸå­ç¬”è®°

- ```javascript
  function makeUser() {
    return {
      name: "John",
      ref: this
    };
  };
  
  let user = makeUser();
  
  alert( user.ref.name ); // Error: Cannot read property 'name' of undefined
  ```

  ä½œä¸ºå‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œ`this` çš„å€¼æ˜¯å¯¹äºæ•´ä¸ªå‡½æ•°çš„ï¼Œä»£ç æ®µå’Œå¯¹è±¡å­—é¢é‡å¯¹å®ƒéƒ½æ²¡æœ‰å½±å“ã€‚

- åœ¨ä¸€ä¸ªå‡½æ•°å†…éƒ¨ï¼Œå¯ä»¥ä½¿ç”¨ `new.target` å±æ€§æ¥æ£€æŸ¥å®ƒæ˜¯å¦è¢«ä½¿ç”¨ `new` è¿›è¡Œè°ƒç”¨äº†ã€‚

  å¯¹äºå¸¸è§„è°ƒç”¨ï¼Œå®ƒä¸ºç©ºï¼Œå¯¹äºä½¿ç”¨ `new` çš„è°ƒç”¨ï¼Œåˆ™ç­‰äºè¯¥å‡½æ•°ï¼š

  ```javascript
  function User() {
    alert(new.target);
  }
  
  // ä¸å¸¦ "new"ï¼š
  User(); // undefined
  
  // å¸¦ "new"ï¼š
  new User(); // function User { ... }
  ```

- å¯¹äºæ„é€ å™¨è€Œè¨€ï¼Œå¸¦æœ‰å¯¹è±¡çš„ `return` è¿”å›è¯¥å¯¹è±¡ï¼Œåœ¨æ‰€æœ‰å…¶ä»–æƒ…å†µä¸‹è¿”å› `this`ã€‚

- å¯é€‰é“¾ `?.` ä¸èƒ½ç”¨åœ¨èµ‹å€¼è¯­å¥çš„å·¦ä¾§ã€‚

- Symbol å±æ€§ä¸å‚ä¸ `for..in` å¾ªç¯ï¼Œä¹Ÿä¼šè¢«`Object.keys(obj)`å¿½ç•¥ï¼›è€Œ`Object.assign` ä¼šåŒæ—¶å¤åˆ¶å­—ç¬¦ä¸²å’Œ symbol å±æ€§ã€‚

- å¯¹è±¡â€”â€”åŸå§‹å€¼è½¬æ¢ç®—æ³•ï¼š

  1. å¦‚æœå­˜åœ¨ï¼Œè°ƒç”¨ `obj[Symbol.toPrimitive](hint)` ã€‚
  2. å¦åˆ™
     - å¦‚æœ hint æ˜¯`"string"`ï¼Œå…ˆå°è¯• `obj.toString()` ï¼Œåå°è¯•`obj.valueOf()`ã€‚
     - å¦‚æœ hint æ˜¯`"number"`æˆ–è€… `"default"`ï¼Œå…ˆå°è¯• `obj.valueOf()` ï¼Œåå°è¯•`obj.toString()`ã€‚